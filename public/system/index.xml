<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Systems on </title>
    <link>http://penghuiy.github.io/system/</link>
    <description>Recent content in Systems on </description>
    <generator>Hugo -- gohugo.io</generator>
    <lastBuildDate>Mon, 29 Apr 2019 00:00:00 +0000</lastBuildDate>
    
        <atom:link href="http://penghuiy.github.io/system/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>如何解决服务依赖</title>
      <link>http://penghuiy.github.io/system/02/</link>
      <pubDate>Mon, 29 Apr 2019 00:00:00 +0000</pubDate>
      
      <guid>http://penghuiy.github.io/system/02/</guid>
      <description>姿势一：添加健康检查，探针检测 以zookeeper为例
livenessProbe: exec: command: - zkOk.sh failureThreshold: 3 initialDelaySeconds: 10 periodSeconds: 10 successThreshold: 1 timeoutSeconds: 5 readinessProbe: exec: command: - zkOk.sh failureThreshold: 3 initialDelaySeconds: 10 periodSeconds: 10 successThreshold: 1 timeoutSeconds: 5  姿势二：添加依赖检测 以kafka-manager为例，依赖zookeeper pod
initContainers: - name: init-service image: busybox command: [&#39;sh&#39;, &#39;-c&#39;, &#39;until nslookup zk-svc-client.dev; do echo waiting for zookeeper; sleep 2; done;&#39;]  扩展：zookeeper基于CAP理论中的cp，故假设有3台zk，一台宕机正常提供服务；两台宕机无法提供服务。</description>
    </item>
    
  </channel>
</rss>
